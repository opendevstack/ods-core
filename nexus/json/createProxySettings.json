{
  "name":"createProxySettings",
  "content":"def httpProxy = '@http_proxy@';
  if (httpProxy.trim().length() > 0) { 
    core.removeHTTPProxy();
    httpProxy = httpProxy.minus(~/^https?:\/\//);
    def hostAndPort = httpProxy.split (':');
    def httpProxyPort = 80;
    def httpProxyName = hostAndPort[0];
    if (hostAndPort.size == 2) {
      httpProxyPort = hostAndPort[1];
    }
    core.httpProxy(httpProxyName, httpProxyPort as int);
    println "HTTPProxy: ${hostAndPort}";
  } else {
    println 'No HTTP Proxy configured';
  }
  def httpsProxy = '@https_proxy@';
  if (httpsProxy.trim().length() > 0) {
    core.removeHTTPSProxy();
    httpsProxy = httpsProxy.minus(~/^https?:\/\//);
    def hostAndPortS = httpsProxy.split (':');
    def httpsProxyPort = 443;
    def httpsProxyName = hostAndPortS[0];
    if (hostAndPortS.size == 2) {
      httpsProxyPort = hostAndPortS[1];
    }
    core.httpsProxy(httpsProxyName, httpsProxyPort as int);
    println "HTTPSProxy: ${hostAndPortS}"
  } else {
    println 'No HTTPS Proxy configured';
  }
  String noProxyHosts = '@no_proxy@';
  if (noProxyHosts.trim().length() > 0) {
    core.nonProxyHosts();
    core.nonProxyHosts(noProxyHosts.split(','));
    println "${noProxyHosts.split(',')}";
  } else {
    println 'No non Proxy hosts configured';
  }",
 "type":"groovy"
}
