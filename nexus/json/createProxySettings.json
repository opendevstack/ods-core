{
  "name":"createProxySettings",
  "content":"def httpProxy = System.getenv('HTTP_PROXY');
  core.removeHTTPProxy()
  if (httpProxy) {
    httpProxy = httpProxy.minus(~/^https?:\/\//)
    List hostAndPort = httpProxy.split (':')
    def httpProxyPort = 80
    def httpProxyName = hostAndPort[0]
    if (hostAndPort.size == 2) {
      httpProxyPort = hostAndPort[1]
    }
    core.httpProxy(httpProxyName, httpProxyPort as int)
    println "HTTPProxy: ${hostAndPort}"
  } else {
    println 'No HTTP Proxy configured'
  }
  def httpsProxy = System.getenv('HTTPS_PROXY');
  core.removeHTTPSProxy()
  if (httpsProxy) {
    httpsProxy = httpsProxy.minus(~/^https?:\/\//)
    List hostAndPortS = httpsProxy.split (':')
    def httpsProxyPort = 443
    def httpsProxyName = hostAndPortS[0]
    if (hostAndPortS.size == 2) {
      httpProxyPortS = hostAndPortS[1]
    }
    core.httpsProxy(httpsProxyName, httpsProxyPort as int)
    println "HTTPSProxy: ${hostAndPortS}"
  } else {
    println 'No HTTPS Proxy configured'
  }
  String noProxyHosts = System.getenv('NO_PROXY')
  if (noProxyHosts) {
    core.nonProxyHosts()
    core.nonProxyHosts(noProxyHosts.split(','))
    println "${noProxyHosts.split(',')}"
  } else {
    println 'No non Proxy hosts configured'
  }",
 "type":"groovy"
}
