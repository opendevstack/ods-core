FROM public.ecr.aws/docker/library/postgres:16-alpine

USER root

# Install oc client tool
RUN if command -v apk &> /dev/null; then \
      apk add --no-cache curl && \
      curl -L https://mirror.openshift.com/pub/openshift-v4/clients/ocp/latest/openshift-client-linux.tar.gz | tar xz -C /usr/local/bin && \
      apk del curl; \
    elif command -v yum &> /dev/null; then \
      yum install -y openshift-clients && \
      yum clean all; \
    fi

USER postgres